<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–í—Ö–æ–¥ ‚Ä¢ CTF Tournament</title>
  <link rel="stylesheet" href="/static/assets/styles.css">
</head>

<body class="auth landing">
  <header class="landing-header">
    <div class="landing-shell landing-header-inner">
      <div class="brand">
        <div class="brand-mark">CTF</div>
        <div class="brand-text">
          <div class="brand-title">CTF Tournament</div>
          <div class="brand-sub">–í—Ö–æ–¥ –≤ –∞–∫–∫–∞—É–Ω—Ç</div>
        </div>
      </div>

      <nav class="landing-nav">
        <a class="nav-link" href="/">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
        <a class="nav-link" href="/register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
      </nav>

      <div class="landing-actions">
        <a class="btn secondary" href="/">–ì–ª–∞–≤–Ω–∞—è</a>
        <a class="btn" href="/register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
      </div>
    </div>
  </header>

  <main class="landing-main">
    <section class="auth-wrap">
      <div class="landing-shell auth-grid">
        <div class="auth-left glass">
          <div class="chip"><span class="dot"></span> –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤—Ö–æ–¥</div>
          <h1 class="auth-title">–° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º</h1>
          <p class="muted auth-desc">
            –í–æ–π–¥–∏ –≤ —Å–∏—Å—Ç–µ–º—É, —á—Ç–æ–±—ã –ø–æ–¥–∞–≤–∞—Ç—å –∑–∞—è–≤–∫–∏ –Ω–∞ –º–∞—Ç—á–∏, —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–º–∞–Ω–¥–∞–º–∏ –∏ —Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–π—Ç–∏–Ω–≥.
          </p>

          <div class="auth-bullets">
            <div class="bullet"><span>‚ö°</span> –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –º–∞—Ç—á–∞–º</div>
            <div class="bullet"><span>üë•</span> –ö–æ–º–∞–Ω–¥—ã –∏ —É—á–∞—Å—Ç–∏–µ –≤ team-–º–∞—Ç—á–∞—Ö</div>
            <div class="bullet"><span>üìà</span> –†–µ–π—Ç–∏–Ω–≥ –∏ –∏—Å—Ç–æ—Ä–∏—è</div>
          </div>

          <div class="small muted" style="margin-top:14px;">
            –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a class="link" href="/register">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
          </div>
        </div>

        <div class="auth-right glass">
          <div class="auth-card-head">
            <div>
              <div class="auth-card-title">–í—Ö–æ–¥</div>
              <div class="small muted">–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å</div>
            </div>
            <a class="btn secondary" href="/">‚Üê –ù–∞–∑–∞–¥</a>
          </div>

          <form id="loginForm" class="auth-form">
            <label class="field">
              <span class="field-label">–õ–æ–≥–∏–Ω</span>
              <input id="username" autocomplete="username" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: kris" required />
            </label>

            <label class="field">
              <span class="field-label">–ü–∞—Ä–æ–ª—å</span>
              <div class="field-pass">
                <input id="password" type="password" autocomplete="current-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required />
                <button type="button" class="icon-btn" id="togglePass" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä–æ–ª—å">üëÅ</button>
              </div>
            </label>

            <button class="btn auth-submit" type="submit">–í–æ–π—Ç–∏</button>

            <div id="msg" class="small" style="margin-top:10px;"></div>

            <div class="auth-divider"><span>–∏–ª–∏</span></div>

            <a class="btn secondary auth-alt" href="/register">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</a>
          </form>
        </div>
      </div>
    </section>
  </main>

  <div class="noise"></div>

<script type="module">
import { api } from "/static/assets/api.js";

const form = document.getElementById("loginForm");
const msg = document.getElementById("msg");

document.getElementById("togglePass").onclick = () => {
  const p = document.getElementById("password");
  p.type = (p.type === "password") ? "text" : "password";
};

form.onsubmit = async (e) => {
  e.preventDefault();
  msg.textContent = "–ü—Ä–æ–≤–µ—Ä—è—é...";
  msg.style.color = "rgba(255,255,255,.85)";

  const username = document.getElementById("username").value.trim();
  const password = document.getElementById("password").value;

  try {
    await api("/auth/login", "POST", { username, password });
    location.href = "/dashboard";
  } catch (err) {
    msg.textContent = "–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: " + err.message;
    msg.style.color = "#ff9a9a";
  }
};
</script>
</body>
</html>
